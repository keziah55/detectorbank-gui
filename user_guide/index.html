<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>User guide - DetectorBank GUI</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">DetectorBank GUI</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="navitem active">
                                <a href="./" class="nav-link">User guide</a>
                            </li>
                            <li class="navitem">
                                <a href="../installation/" class="nav-link">Installation</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href=".." class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../installation/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-light">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#user-guide" class="nav-link">User Guide</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#loading-an-audio-file" class="nav-link">Loading an audio file</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#setting-detectorbank-parameters" class="nav-link">Setting DetectorBank parameters</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#saving-and-loading-profiles" class="nav-link">Saving and loading profiles</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#subsample-factor" class="nav-link">Subsample factor</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#analysing-the-audio" class="nav-link">Analysing the audio</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="user-guide">User Guide</h1>
<p>There are three panels in this app: Audio Input and Parameters on the left and 
Output on the right. </p>
<table>
<thead>
<tr>
<th style="text-align: center;"><img alt="Application window" src="../img/db-gui.png" /></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><em>Application window with analyis of an audio file</em></td>
</tr>
</tbody>
</table>
<h2 id="loading-an-audio-file">Loading an audio file</h2>
<table>
<thead>
<tr>
<th style="text-align: center;"><img alt="Audio Input" src="../img/audio_input.png" title="Audio file with four regions" /></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><em>Audio file with four regions. The current mouse position is given under the plot.</em></td>
</tr>
</tbody>
</table>
<p>Use the button in the top right of the Audio Input panel to select an audio file. 
Note that it must be a '.wav' file.</p>
<p>Performing analysis on a large audio file can consume a lot of RAM, so you can select
regions that you'd like to analyse. By default, when you load audio, a region
spanning the entire file will be added. You can resize or move it by clicking and dragging or by setting values directly in the region list. </p>
<p>New regions can be added with the '+' button. Individual regions can be removed with 
their '-' button or by clicking on it then pressing the 'Delete' key. 
The 'remove' button at the top of the list will remove all the 
regions, except the first. There must always be at least one region. 
Regions can also be added or removed by right-clicking on the plot and selecting 
the desired operation from the context menu. </p>
<p>You can listen to a region by clicking its 'Play' button. (NB this feature is 
currently only available if you are using Qt5, not Qt6.)</p>
<p>You can zoom in on the plot of the audio file by scrolling on it and pan by clicking and dragging it. To zoom or pan on one axis, scroll or drag on that axis. 
After interacting with the plot, you can reset the view by clicking the 'A' button in 
the bottom left.</p>
<h2 id="setting-detectorbank-parameters">Setting DetectorBank parameters</h2>
<table>
<thead>
<tr>
<th style="text-align: center;"><img alt="Parameters" src="../img/parameters.png" title="Parameters panel" /></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><em>Parameters for analysing the audio</em></td>
</tr>
</tbody>
</table>
<p>When you load an audio file, the sample rate will automatically be filled in in the 
Parameters panel. The remaining values, with the exception of the frequencies and 
bandwidths, are set to default values. </p>
<p>'Threads' is the maximum number of threads to use when running the analysis. 
This defaults to the number of cores on your computer.</p>
<p>'Damping' determines the relaxation time of the detectors. 
A sensible range is 0.0001 to 0.0005. Increasing the damping factor also increases the 
minimum bandwidth of a detector. 
The table below shows the minimum possible bandwidth for detectors at five damping
factors from 0.0001 to 0.0005, at two common sample rates: 44.1kHz and 48kHz.</p>
<table>
<thead>
<tr>
<th style="text-align: center;">Damping</th>
<th style="text-align: center;">Min. bandwidth (sr=44100)</th>
<th style="text-align: center;">Min. bandwidth (sr=48000)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">0.0001</td>
<td style="text-align: center;">0.850 Hz</td>
<td style="text-align: center;">0.922 Hz</td>
</tr>
<tr>
<td style="text-align: center;">0.0002</td>
<td style="text-align: center;">1.688 Hz</td>
<td style="text-align: center;">1.832 Hz</td>
</tr>
<tr>
<td style="text-align: center;">0.0003</td>
<td style="text-align: center;">2.528 Hz</td>
<td style="text-align: center;">2.752 Hz</td>
</tr>
<tr>
<td style="text-align: center;">0.0004</td>
<td style="text-align: center;">3.360 Hz</td>
<td style="text-align: center;">3.660 Hz</td>
</tr>
<tr>
<td style="text-align: center;">0.0005</td>
<td style="text-align: center;">4.200 Hz</td>
<td style="text-align: center;">4.860 Hz</td>
</tr>
</tbody>
</table>
<p>'Gain' scales the output. You can use this to keep the output values in a sensible range.
(See also: amplitude normalisation.)</p>
<p>'Numerical method', 'Frequency normalisation' and 'Amplitude normalisation' are described
<a href="https://keziah55.github.io/DetectorBank/FeaturesExplained.html">here</a>.
The default values are Fourth order Runge-Kutta for the numerical method and no frequency 
or amplitude normalisation.</p>
<h3 id="selecting-frequencies-and-bandwidths">Selecting frequencies and bandwidths</h3>
<table>
<thead>
<tr>
<th style="text-align: center;"><img alt="Frequency bandwidth dialog" src="../img/freq_bw_dialog.png" title="Frequency and bandwidth dialog" /></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><em>Dialog window for setting frequencies and bandwidths of the detectors</em></td>
</tr>
</tbody>
</table>
<p>There are three ways to set the frequencies. The first, as illustrated above, is to set the 
note range (calculated with A4=440Hz). </p>
<p>The second option, 'Equation', allows you to set the values from the following equation:</p>
<div class="arithmatex">\[
f = f_{ref} * 2^{n / EDO}
\]</div>
<p>where <span class="arithmatex">\(f_{ref}\)</span> is a reference frequency (e.g. 440Hz), <span class="arithmatex">\(EDO\)</span> is the number of divisions
per octave (typically 12), and <span class="arithmatex">\(n_0\)</span> and <span class="arithmatex">\(n_1\)</span> are integers that define the start and 
stop steps.</p>
<p>Finally, you can manually enter frequency values in the table on the right. Use the buttons 
at the bottom to add or remove rows.</p>
<p>There are two options to set the bandwidth: setting a constant bandwidth for all detectors 
or manually entering values in the table. Note that 0Hz will default to the minimum possible 
bandwidth for that detector, given the other chosen parameters. See the table above for the 
minimum bandwidth values.</p>
<h2 id="saving-and-loading-profiles">Saving and loading profiles</h2>
<p>Rather than entering your chosen parameters each time you use the app, you can save and load
parameters as profiles. Use the 'Save' button to save the current parameters and the drop-down
menu to load them. You can set a chosen profile as the default with the check box.</p>
<h2 id="subsample-factor">Subsample factor</h2>
<p>As noted above, analysing an audio file can consume a lot of RAM. To help reduce this, you can 
set a factor to subsample the results by when plotting. The default value is 1000.</p>
<h2 id="analysing-the-audio">Analysing the audio</h2>
<table>
<thead>
<tr>
<th style="text-align: center;"><img alt="Output" src="../img/output.png" title="Analysis of audio file" /></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><em>Analysis of the four selected audio regions</em></td>
</tr>
</tbody>
</table>
<p>Once you've loaded an audio file and chosen your parameters, you can perform the analysis 
by clicking the 'Run' button at the top left of the Output panel, pr pressing F5.</p>
<p>A plot will be created for each region. The title of the plot is the region time range 
and it is displayed in the same colour as the region. </p>
<p>Hovering the mouse over a line in a plot will highlight that line. Under the plot, the time 
at the mouse point is displayed, along with the frequency represented by the selected line 
and its amplitude at the mouse point. When a line is hovered, it is also highlighted in the 
legend under the plots, e.g. the in the bottom left, the blue line showing the response 
at 440Hz is highlighted in the plot and the legend.</p>
<p>By default, the plots are shown in a 2x2 grid, spanning as many pages as necessary.
You can change the grid dimensions by setting the rows and columns at the top of the 
Output panel.</p>
<p>The button at the end of the top toolbar allow you to remove all plots from the panel.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../javascripts/mathjax.js" defer></script>
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6" defer></script>
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
